<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MooreWorks Calendar</title>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 2rem;
      background: #f4f4f6;
    }
    #calendar {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h1>üóìÔ∏è MooreWorks Job Calendar</h1>
  
<!-- Job Search -->
<div style="text-align: center; margin-bottom: 1.5rem;">
  <input 
    type="text" 
    id="jobSearchInput" 
    placeholder="Search jobs by name or address..." 
    style="width: 80%; padding: 0.5rem; font-size: 1rem; border-radius: 5px; border: 1px solid #ccc;" 
  />
  <ul 
    id="searchResults" 
    style="list-style: none; padding: 0; margin: 0.5rem auto 0; max-width: 80%; background: white; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); display: none; position: relative; z-index: 1001;">
  </ul>
</div>

  <div id="calendar"></div>

  <!-- Add Job Button -->
<div style="text-align: center; margin-top: 2rem;">
  <button id="addJobBtn" class="cta-button">‚ûï Add Job</button>
</div>

<!-- Modal Form -->
<div id="jobModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:1000; justify-content:center; align-items:center;">
  <div style="background:white; padding:2rem; border-radius:10px; width:90%; max-width:500px;">
    <h2 id="modalHeader" style="margin-top:0;">Add New Job</h2>
    <form id="jobForm">
      <label>Date: <input type="date" name="date" id="date" required></label><br><br>
      <label>Job Name: <input type="text" name="jobType" id="jobType" required></label><br><br>
      <label>Address: <input type="text" name="address" id="address"></label><br><br>
      <label>Crew: <input type="text" name="crew" id="crew"></label><br><br>
      <label>Field Hours: <input type="number" name="fieldHours" id="fieldHours" step="0.1"></label><br><br>
      <label>Office Hours: <input type="number" name="officeHours" id="officeHours" step="0.1"></label><br><br>
      <label>Job Brief:<br><textarea name="jobBrief" id="jobBrief" rows="3" style="width:100%;"></textarea></label><br><br>
      <label>Invoice Status:
  <select name="invoiceStatus" id="invoiceStatus" style="width:100%;">
    <option value="">Invoice Not Sent</option>
    <option value="unpaid">Invoice Sent (Unpaid)</option>
    <option value="paid">Invoice Sent (Paid)</option>
  </select>
</label><br><br>
      <div style="text-align: right;">
        <button type="submit" class="cta-button small">Save</button>
        <button type="button" id="cancelBtn" class="cta-button small" style="background:gray;">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- Job Details Modal -->
<div id="jobDetailsPopup" style="display: none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:1000; justify-content:center; align-items:center;">
  <div style="background:white; padding:2rem; border-radius:10px; width:90%; max-width:500px;">
    <h2 id="detailsTitle" style="margin-bottom: 0.5rem;">Job Details</h2>
    <p><strong>Job Name:</strong> <span id="detailsType"></span></p>
    <p><strong>Address:</strong> <span id="detailsAddress"></span></p>
    <p><strong>Date:</strong> <span id="detailsDate"></span></p>
    <p><strong>Crew:</strong> <span id="detailsCrew"></span></p>
    <p><strong>Crew Hours:</strong> <span id="detailsFieldHours"></span></p>
    <p><strong>Office Hours:</strong> <span id="detailsOfficeHours"></span></p>
    <p><strong>Job Brief:</strong> <span id="detailsNotes"></span></p>
    <p><strong>Invoice Status:</strong> <span id="detailsInvoiceStatus"></span></p>

    <div style="margin-top: 1.5rem; text-align: right;">
      <button id="editJobBtn" class="primary">Edit</button>
      <button id="deleteJobBtn" class="danger">Delete</button>
      <button onclick="closeDetailsPopup()">Close</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="/calendar.js"></script>
</body>
</html>